<?xml version="1.0"?>

<launch>
	<node pkg="topic_tools" type="mux" name="cmd_mux" args="/vrep/twistCommand /teleop/twistCommand /mux/autoCommand">
	</node>
	
	<node respawn="false" pkg="joy" type="joy_node" name="joy" >
		<param name="dev" type="string" value="/dev/input/js0" /> 
		<!-- <param name="deadzone" value="0.12" /> -->
		<param name="autorepeat_rate" value="10.0" />
	</node>
	
	<node pkg="vrep_ros_teleop" type="teleop_mux.py" name="teleop_mux">
		<param name="joystick_button" value="0" type="int"/>
		<param name="joystick_topic" value="/teleop/twistCommand"/>
		<param name="auto_button" value="1" type="int"/>
		<param name="auto_topic" value="/mux/autoCommand"/>
		<remap from="/teleop_mux/joy" to="/joy"/>
	</node>
	
	<node pkg="vrep_ros_teleop" type="teleop.py" name="teleop">
		<param name="axis_linear_x" value="1" type="int"/>
		<param name="axis_angular" value="0" type="int"/>
		<param name="scale_linear" value="0.5" type="double"/>
		<param name="scale_angular" value="1.0" type="double"/>
		<remap from="/teleop/joy" to="/joy"/>
	</node>
	
	<node pkg="depthimage_to_laserscan" type="depthimage_to_laserscan" name="depthimage_to_laserscan">
		<param name="camera_info" value="/cam1/camera_info"/>
		<remap from="/image" to="/vrep/hokuyoSensor"/>
	</node>

	<node name="gmapping" pkg="gmapping" type="slam_gmapping" args="scan:=/scan" output="screen">
		<param name="linearUpdate" value="0.1" />
		<param name="angularUpdate" value="0.05" /> 
		<param name="xmin" value="-20" />   
		<param name="ymin" value="-20" />
		<param name="xmax" value="20" />    
		<param name="ymax" value="20" />
		<param name="maxUrange" value="6" />        
	</node>
</launch>
